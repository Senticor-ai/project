apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  POSTGRES_DB: project
  POSTGRES_USER: project
  POSTGRES_HOST: postgres
  POSTGRES_PORT: "5432"
  CORS_ORIGINS: "https://project.senticor.runs.onstackit.cloud"
  SESSION_COOKIE_SECURE: "true"
  SESSION_COOKIE_SAMESITE: lax
  SESSION_BIND_IP: "false"
  TRUST_PROXY_HEADERS: "true"
  CSRF_ENABLED: "true"
  HSTS_ENABLED: "true"
  HSTS_MAX_AGE: "31536000"
  # Demo/dev tenant: keep developer tools enabled for /settings/developer.
  DEV_TOOLS_ENABLED: "true"
  FILE_STORAGE_PATH: /data/storage
  LOG_FORMAT: json
  # Gmail OAuth (non-secret config — secrets go in app-secrets)
  GMAIL_REDIRECT_URI: "https://project.senticor.runs.onstackit.cloud/api/email/oauth/gmail/callback"
  FRONTEND_BASE_URL: "https://project.senticor.runs.onstackit.cloud"
  BACKEND_BASE_URL: "http://backend:8000"
  STORYBOOK_URL: "http://storybook"
  OPENCLAW_RUNTIME: "k8s"
  OPENCLAW_IMAGE: "registry.onstackit.cloud/senticor/project/openclaw:2d5ab5b687b69cb9f3c5b3217b8c476667b11cff"
  OPENCLAW_K8S_NAMESPACE: "project"
  OPENCLAW_K8S_PVC_NAME: "backend-files"
  OPENCLAW_K8S_IMAGE_PULL_SECRET: "stackit-registry"
  OPENCLAW_K8S_GATEWAY_PORT: "18789"
  OPENCLAW_K8S_CPU_REQUEST: "100m"
  OPENCLAW_K8S_MEMORY_REQUEST: "256Mi"
  OPENCLAW_K8S_CPU_LIMIT: "500m"
  OPENCLAW_K8S_MEMORY_LIMIT: "1Gi"
  OPENCLAW_K8S_MAX_CONCURRENT_PODS: "8"
  OTEL_SERVICE_NAME: project-backend
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://alloy.observability.svc.cluster.local:4318"
  OTEL_EXPORTER_OTLP_PROTOCOL: "http/protobuf"
  OTEL_RESOURCE_ATTRIBUTES: "service.namespace=project,deployment.environment=production"
  # Gmail Watch + Pub/Sub (non-secret config — SA JSON mounted from pubsub-sa secret)
  GMAIL_PUBSUB_PROJECT_ID: "senticor-project"
  GMAIL_PUBSUB_TOPIC: "projects/senticor-project/topics/gmail-push"
  GMAIL_PUBSUB_SUBSCRIPTION: "gmail-push-sub"
  GMAIL_PUBSUB_CREDENTIALS_FILE: "/etc/gcp/pubsub-sa.json"
