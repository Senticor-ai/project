apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
  - configmap.yaml
  - secrets-per-workload.yaml

images:
  - name: project-backend
    newName: registry.onstackit.cloud/senticor/project/backend
    newTag: "9d8e118346c49d8193cccc6f6955043eedf25fb5"
  - name: project-frontend
    newName: registry.onstackit.cloud/senticor/project/frontend
    newTag: "9d8e118346c49d8193cccc6f6955043eedf25fb5"
  - name: project-storybook
    newName: registry.onstackit.cloud/senticor/project/storybook
    newTag: "9d8e118346c49d8193cccc6f6955043eedf25fb5"
  - name: project-agents
    newName: registry.onstackit.cloud/senticor/project/agents
    newTag: "9d8e118346c49d8193cccc6f6955043eedf25fb5"

patches:
  - path: patches/backend.yaml
  - path: patches/worker.yaml
  - path: patches/push-worker.yaml
  - path: patches/watch-worker.yaml
  - path: patches/agents.yaml
  - path: patches/frontend.yaml
  - path: patches/storybook.yaml
  - path: patches/postgres.yaml
  - path: patches/backend-pubsub.yaml
  - path: patches/worker-pubsub.yaml
  - path: patches/watch-worker-pubsub.yaml
